{"version":3,"sources":["webpack://distro/webpack/universalModuleDefinition","webpack://distro/./src/xnquery.js","webpack://distro/webpack/bootstrap","webpack://distro/webpack/runtime/compat get default export","webpack://distro/webpack/runtime/define property getters","webpack://distro/webpack/runtime/hasOwnProperty shorthand","webpack://distro/webpack/runtime/make namespace object","webpack://distro/./src/index.js"],"names":["window","init","el","ConvertToArray","document","querySelectorAll","NodeList","Array","isArray","Node","XNQuery","prototype","length","extend","options","name","src","copy","copyIsArray","clone","target","arguments","i","deep","undefined","parent","parentNode","parents","parentSelector","forEach","e","p","push","reverseArryToNodeList","arry","div","createElement","appendChild","childNodes","hasClass","className","classList","contains","attr","value","setAttribute","getAttribute","find","query","list","concat","children","queryList","queryListLength","c","j","each","callback","index","targetDom","eq","get","addClass","classname","add","split","nextUntil","isprev","next","querySelector","func","n","prevAll","nextAll","removeClass","remove","val","html","innerHTML","empty","parseToDOM","str","nodes","array","slice","call","ex","parseDomToString","dom","append","newel","newele","newe","removeChild","slideUp","time","style","display","css","fadeOut","animate","opacity","fadeIn","ele","totalTimes","initTime","initCss","isNaN","parseFloat","unit","String","substring","interval","setInterval","clearInterval","outerWidth","offsetWidth","outerHeight","offsetHeight","hide","show","position","top","offsetTop","left","offsetLeft","not","filter","$","settings","CSS","CPicker","element","dataset","$element","id","getRandomString","injectCss","updateMode","createClickableControl","getChecked","radios","one","selector","node","matches","colourToHex","colour","result","indexOf","lastIndexOf","map","Number","r","g","b","toString","substr","hexToRgb","hex","alpha","replace","m","match","x","parseInt","join","getAlpha","a","getContrast","R","G","B","A","brightness","replaceAll","findArray","replaceArray","regex","RegExp","matched","len","$chars","maxPos","pwd","charAt","Math","floor","random","that","nodeName","type","previewElement","updatePreview","onclick","toggleColourPicker","controlSurface","createControlSurface","hasAttribute","removeAttribute","link","href","btoa","rel","getElementsByTagName","destroyColourPicker","getElementById","inputs","imagePreview","gradientPreview","createRange","createContextualFragment","body","single","singleo","from","fromo","to","too","shapes","directions","positions","repeats","sizes","setPosition","displayMode","updateFields","addListeners","ww","documentElement","clientWidth","hh","clientHeight","pbox","getBoundingClientRect","scrollY","scrollX","width","data","currentMode","background","showGradient","calculateColour","props","colourProperties","solid","solido","console","log","shape","direction","size","repeat","url","addEventListener","selectColour","files","reader","FileReader","onload","obj","readAsDataURL","stopPropagation","gfrom","gto","colours","brackettedValue","Function","trim","dir","pos","includes","altDirection","cFrom","aFrom","cTo","aTo"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(self, function() {\nreturn ","//! xnquery.js\n//! 仙女座js方法库，使用es6实现部分jquery方法\n//! version : 1.0.1\n//! authors : 范媛媛\n//! create date:2021/01/27 V1.0.0\n//! create date:2021/01/28 V1.0.1\n// https://github.com/fanaiai/xndatepicker\n(function (window) {\n    function init(el) {\n        if (typeof el == 'string') {\n            this.el = this.ConvertToArray(document.querySelectorAll(el));\n        }\n        if (el instanceof NodeList) {\n            this.el = this.ConvertToArray(el);\n        }\n        else if(Array.isArray(el)){\n            this.el = el;\n        }\n        if (el instanceof Node) {\n            this.el = [el]\n        }\n        if (!this.el) {\n            this.el = [];\n        }\n    }\n\n    function XNQuery(el) {\n        return new init(el);\n    }\n\n    XNQuery.prototype = init.prototype = {\n        length() {\n            return this.el.length;\n        },\n        extend() {\n            var options, name, src, copy, copyIsArray, clone,\n                target = arguments[0] || {}, // 目标对象\n                i = 1,\n                length = arguments.length,\n                deep = false;\n            // 处理深度拷贝情况（第一个参数是boolean类型且为true）\n            if (typeof target === \"boolean\") {\n                deep = target;\n                target = arguments[1] || {};\n                // 跳过第一个参数（是否深度拷贝）和第二个参数（目标对象）\n                i = 2;\n            }\n            // 如果目标不是对象或函数，则初始化为空对象\n            if (typeof target !== \"object\") {\n                target = {};\n            }\n            // 如果只指定了一个参数，则使用jQuery自身作为目标对象\n            if (length === i) {\n                target = this;\n                --i;\n            }\n            for (; i < length; i++) {\n                // Only deal with non-null/undefined values\n                if ((options = arguments[i]) != null) {\n                    // Extend the base object\n                    for (name in options) {\n                        src = target[name];\n                        copy = options[name];\n                        // Prevent never-ending loop\n                        if (target === copy) {\n                            continue;\n                        }\n                        // 如果对象中包含了数组或者其他对象，则使用递归进行拷贝\n                        let copyIsArray=Array.isArray(copy)\n                        if (deep && copy && (typeof copy == 'object' || (copyIsArray))) {\n                            // 处理数组\n                            if (copyIsArray) {\n                                copyIsArray = false;\n                                // 如果目标对象不存在该数组，则创建一个空数组；\n                                clone = src && Array.isArray(src) ? src : [];\n                            } else {\n                                clone = src && typeof src == 'object' ? src : {};\n                            }\n                            // 从不改变原始对象，只做拷贝\n                            target[name] = this.extend(deep, clone, copy);\n                            // 不拷贝undefined值\n                        } else if (copy !== undefined) {\n                            target[name] = copy;\n                        }\n                    }\n                }\n            }\n            // 返回已经被修改的对象\n            return target;\n        },\n        parent() {\n            let el = this.el[0]\n            if (el && el.parentNode) {\n                return XNQuery([el.parentNode])\n            } else {\n                return XNQuery([])\n            }\n        },\n        parents(parentSelector /* optional */) {\n            let el = this.el[0]\n            if (parentSelector === undefined) {\n                parentSelector = [document];\n            } else {\n                parentSelector = this.ConvertToArray(document.querySelectorAll(parentSelector))\n            }\n            var parents = [];\n            if (el) {\n                parentSelector.forEach((e) => {\n                    var p = el.parentNode;\n                    while (p != e && p != null) {\n                        p = p.parentNode;\n                    }\n\n                    if (p != null) {\n                        parents.push(p);\n                    }\n                })\n            }\n            return XNQuery(parents)\n            // var p = el.parentNode;\n            // console.log(parentSelector,p)\n            // while (p !== parentSelector && p!=null) {\n            //     var o = p;\n            //     console.log(o)\n            //     parents.push(o);\n            //     p = o.parentNode;\n            // }\n            // parents.push(parentSelector); // Push that parentSelector you wanted to stop at\n            // console.log(parents);\n            // // return parents;\n            // return XNQuery(this.reverseArryToNodeList(parents))\n        },\n        reverseArryToNodeList(arry) {\n            return arry\n            var div = document.createElement('div')\n            for (let i = 0; i < arry.length; i++) {\n                div.appendChild(arry[i])\n            }\n            return div.childNodes;\n        },\n        hasClass(className) {\n            if (this.el.length > 0) {\n                return this.el[0].classList.contains(className);\n            } else {\n                return false;\n            }\n        },\n        attr(attr, value) {\n            if (value) {\n                this.el.forEach((e) => {\n                    e.setAttribute(attr, value)\n                })\n                return this;\n            } else {\n                if (!this.el[0]) {\n                    return null;\n                }\n                return this.el[0].getAttribute(attr)\n            }\n        },\n        find(query) {\n            if (!this.el || this.el.length <= 0) {\n                return XNQuery([]);\n            }\n            if (typeof query != 'string') {\n                var list = [];\n                this.el.forEach((e) => {\n                    var arry = e.querySelectorAll('*');\n                    for (let i = 0; i < arry.length; i++) {\n                        if (arry[i] == query) {\n                            list.push(query)\n                        }\n                    }\n                })\n                return XNQuery(list)\n            } else {\n                var list = [];\n                this.el.forEach((e) => {\n                    list = list.concat(this.ConvertToArray(e.querySelectorAll(query)))\n                })\n                return XNQuery(list);\n            }\n        },\n        children(query) {\n            if (!this.el || this.el.length <= 0) {\n                return XNQuery([]);\n            }\n            var queryList = [];\n            if (Array.isArray(query)) {\n                queryList = query;\n            }\n            var children = []\n            this.el.forEach((e) => {\n                children = children.concat(this.ConvertToArray(e.children))\n                if (typeof query == 'string') {\n                    queryList = queryList.concat(this.ConvertToArray(e.querySelectorAll(query)))\n                }\n\n            })\n            var list = [];\n            var queryListLength = queryList.length;\n            for (let i = 0; i < children.length; i++) {\n                let c = children[i];\n                for (let j = 0; j < queryListLength; j++) {\n                    if (queryList[j] == c) {\n                        list.push(c);\n                        break;\n                    }\n                }\n            }\n            return XNQuery(list);\n        },\n        each(callback) {\n            return this.el.forEach(callback)\n        },\n        index(targetDom) {\n            if (!targetDom) {\n                var list=this.el[0].parentNode.childNodes;\n                for(let i=0;i<list.length;i++){\n                    if(list[i]==this.el[0]){\n                        return i;\n                    }\n                }\n                return null;\n            } else {\n                for (let i = 0; i < this.el.length; i++) {\n                    if (this.el[i] == targetDom) {\n                        return i;\n                    }\n                }\n            }\n        },\n        eq(index) {\n            var el = this.el[index];\n            if (el) {\n                return XNQuery(this.reverseArryToNodeList([el]))\n            } else {\n                return XNQuery(this.reverseArryToNodeList([]))\n            }\n        },\n        get(index) {\n            return this.el[index]\n        },\n        addClass(classname) {\n            this.el.forEach((e) => {\n                if (e.classList) {\n                    e.classList.add(...classname.split(' '))\n                }\n            })\n        },\n        nextUntil(query, isprev) {\n            var el = this.el[0]\n            if (!el) {\n                return XNQuery([]);\n            }\n            if (!query) {\n                var next = null;\n            } else {\n                if (typeof query == 'object' && query instanceof Node) {\n                    var next = query;\n                } else {\n                    var next = el.parentNode.querySelector(query)\n                }\n            }\n            var list = [];\n            var func = isprev ? 'previousSibling' : 'nextSibling'\n            var n = el[func];\n            while (n != next && n != null) {\n                list.push(n)\n                n = n[func];\n            }\n            return XNQuery(list)\n        },\n        prevAll() {\n            return this.nextUntil(null, true)\n        },\n        nextAll() {\n            return this.nextUntil()\n        },\n        removeClass(classname) {\n            this.el.forEach((e) => {\n                e.classList.remove(classname)\n            })\n            return this;\n        },\n        val(val) {\n            if (!val) {\n                return this.el[0].value;\n            } else {\n                this.el.forEach((e) => {\n                    e.value = val;\n                })\n            }\n        },\n        html(val) {\n            if (!this.el || !this.el[0]) {\n                return;\n            }\n            if (!val) {\n                return this.el[0].innerHTML;\n            } else {\n                this.el.forEach((e) => {\n                    e.innerHTML = val;\n                })\n            }\n        },\n        empty() {\n            this.el.forEach((e) => {\n                e.innerHTML = '';\n            })\n            return this;\n        },\n        parseToDOM(str) {\n            var div = document.createElement(\"div\");\n            if (typeof str == \"string\") {\n                div.innerHTML = str;\n            }\n            return div.childNodes;\n        },\n        ConvertToArray(nodes) {\n            var array = null;\n            try {\n                array = Array.prototype.slice.call(nodes, 0);//非ie浏览器  ie8-将NodeList实现为COM对象，不能用这种方式检测\n            } catch (ex) {//ie8-\n                array = new Array();\n                for (var i = 0; i < nodes.length; i++) {\n                    array.push(nodes[0]);\n                }\n            }\n            return array;\n        },\n        parseDomToString(dom) {\n\n        },\n        append(newel) {\n            var newele;\n            if (typeof newel == 'string') {\n                newele = this.parseToDOM(newel)\n                newele = this.ConvertToArray(newele)\n            } else {\n                newele = [newel];\n            }\n            for (let i = 0; i < newele.length; i++) {\n                let newe = newele[i]\n                this.el.forEach((e) => {\n                    e.appendChild(newe)\n                })\n            }\n        },\n        remove() {\n            this.el.forEach((e) => {\n                if(e.parentNode){\n                e.parentNode.removeChild(e)}\n            })\n\n        },\n        slideUp(time) {\n            this.el.forEach((e) => {\n                e.style.display = 'none'\n            })\n        },\n        css(...css) {\n            if (typeof css[0] == 'object') {\n                for (let i in css[0]) {\n                    this.el.forEach((e) => {\n                        e.style[i] = css[0][i]\n                    })\n                }\n                return this;\n            } else {\n                if (css.length == 1) {\n                    return this.el[0].style[css[0]]\n                }\n                if(css.length==2){\n                    this.el.forEach((e) => {\n                        e.style[css[0]] = css[1]\n                    })\n                    return this;\n                }\n            }\n        },\n        fadeOut(time){\n            this.el.forEach((e) => {\n                this.animate({opacity:0},time,e,()=>{\n                    e.style.display = 'none'\n                })\n            })\n        },\n        fadeIn(time) {\n            this.el.forEach((e) => {\n                e.style.display = 'block'\n                // e.style.opacity = 1;\n                this.animate({opacity:1},time,e)\n            })\n        },\n        animate(css, time,ele,callback) {\n            if (!time) {\n                time = 300;\n            }\n            var totalTimes=time/50;\n            var initTime=0;\n            var initCss={};\n            for(let i in css){\n                if(!isNaN(parseFloat(css[i]))){\n                    initCss[i]={init:parseFloat(ele.style[i])||0,unit:String(css[i]).substring(String(parseFloat(css[i])).length)};\n                }\n            }\n            var interval=window.setInterval(()=>{\n                for(let i in initCss){\n                    if(initTime>=totalTimes){\n                        ele.style[i]=css[i];\n                    }\n                    else{\n                        ele.style[i]=((parseFloat(css[i])-initCss[i].init)*initTime/totalTimes+initCss[i].init)+initCss[i].unit;\n                    }\n\n                }\n                if(initTime>=totalTimes){\n                    if(typeof callback=='function'){\n                    callback()}\n                    window.clearInterval(interval);\n                }\n                initTime++;\n            },20)\n        },\n        outerWidth() {\n            var el = this.el[0];\n            return el.offsetWidth\n        },\n        outerHeight() {\n            var el = this.el[0];\n            return el.offsetHeight\n        },\n        hide() {\n            this.el.forEach((e) => {\n                e.style.display = 'none'\n            })\n            return this;\n        },\n        show() {\n            this.el.forEach((e) => {\n                e.style.display = 'block'\n            })\n            return this;\n        },\n        position() {\n            return {\n                top: this.el[0].offsetTop,\n                left: this.el[0].offsetLeft,\n            }\n        },\n        not(dom){\n            this.el=this.el.filter((e)=>{\n                return e!=dom;\n            })\n            return this;\n        }\n    }\n    XNQuery.extend = XNQuery.prototype.extend;\n    window.XNQuery = XNQuery;\n})(window)\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import './xnquery.js'\n\n(function (window, $) {\n\n    let settings = { value : '#ffffff' };\n    const CSS = '.cpicker-container input[type=color]{cursor:pointer}.cpicker-container input[type=color i],.cpicker-container input[type=color i]::-webkit-color-swatch,.cpicker-container input[type=color i]::-webkit-color-swatch-wrapper{padding:0;border-color:#fff;border-radius:5px}.cpicker-radio{display:flex;justify-content:space-evenly}.cpicker-radio>div{vertical-align:middle}.cpicker-radio>div:not(:last-of-type){margin-right:1px}.cpicker-radio input[type=radio]{position:absolute;left:-9999px}.cpicker-radio input[type=radio]+label{background-color:#fff;color:#369;border-radius:3px;padding:.25rem .5rem;transition:background-color .3s,color .3s}.cpicker-radio input[type=radio]:checked+label{background-color:#369;color:#fff}.cpicker-mode-gradient .cpicker-flex{align-items:stretch}.cpicker-row>span{margin:.5rem 0;display:block}.cpicker-modeswitch{padding:5px 0;border-bottom:1px solid #ccc}.cpicker-preview-element{width:32px;height:32px;border:1px solid #ccc;box-shadow:0 0 3px rgba(0,0,0,.2);cursor:pointer}.cpicker-container{position:absolute;width:280px;background-color:#fff;box-shadow:0 3px 6px rgba(0,0,0,.2);padding:5px}.cpicker-container>div{margin-bottom:5px}.cpicker-image-preview{vertical-align:middle;width:100px;min-height:56.25px;background-color:#f8f8f8}.cpicker-flex-between{justify-content:space-between;align-items:center}.cpicker-flex,.cpicker-flex-1{display:flex}.cpicker-checkers,.cpicker-img-preview{background:url(data:image/png;base64,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ICAgIDx4bXA6Q3JlYXRvclRvb2w+QWRvYmUgUGhvdG9zaG9wIENTNiAoV2luZG93cyk8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHhtcE1NOkRlcml2ZWRGcm9tIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgPHN0UmVmOmluc3RhbmNlSUQ+eG1wLmlpZDo3N0FERkY4MUNCOTcxMUUzQjE5OTk3MzZFOUEzNURDRjwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDo3N0FERkY4MkNCOTcxMUUzQjE5OTk3MzZFOUEzNURDRjwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgPC94bXBNTTpEZXJpdmVkRnJvbT4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDo3N0FERkY4NENCOTcxMUUzQjE5OTk3MzZFOUEzNURDRjwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOkluc3RhbmNlSUQ+eG1wLmlpZDo3N0FERkY4M0NCOTcxMUUzQjE5OTk3MzZFOUEzNURDRjwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHRpZmY6T3JpZW50YXRpb24+MTwvdGlmZjpPcmllbnRhdGlvbj4KICAgICAgICAgPGRjOmZvcm1hdD5pbWFnZS9wbmc8L2RjOmZvcm1hdD4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CvRWRVUAAAAySURBVDgRY/wPBAx4wKFDh/DIMjAw4ZUlQnLUgMEQiCyE4tnOzg5vZI5G42CIRopjAQBajwlk46G0YgAAAABJRU5ErkJggg==)}.cpicker-img-preview{width:5rem;height:3rem;object-fit:contain;border-radius:3px;vertical-align:middle}.cpicker-controls{margin-bottom:0;padding-bottom:0}.cpicker-controls>span,.cpicker-flex-1>*,.cpicker-gradient-preview{flex:1}.cpicker-controls span>a{text-align:center;display:block;padding:.25rem;border:1px solid #ccc;background:#f8f8f8;border-radius:2px;cursor:pointer}.cpicker-controls span:first-of-type{margin-right:.25rem}.cpicker-controls,.cpicker-row:not(:first-of-type){border-top:1px solid #ccc;margin:5px 0;padding:5px 0}';\n\n    function CPicker(element, options) {\n        if (typeof element === 'string') element = document.querySelector(element);\n        settings.value = element.dataset.value ? element.dataset.value : element.value ? element.value : settings.value;\n        this.element = element;\n        this.$element = $(element);\n        this.id = this.getRandomString();\n        this.settings = $.extend({}, settings, options);\n        this.injectCss();\n        this.updateMode(this.settings.value);\n        this.createClickableControl();\n    }\n\n    CPicker.prototype = {\n\n        /* get the checked item from a NodeList of radio buttons */\n        getChecked: function(radios) {\n            return this.one(radios,\":checked\");\n        },\n\n\n        /* get a Node matching a selector from a NodeList */\n        one: function(nodes, selector) {\n            return [].filter.call(nodes,function(node) {\n                return node.matches(selector);\n            })[0];\n        },\n\n\n        /* convert hex, rgb or rgba colour to 6-digit hex notation */\n        colourToHex: function(colour) {\n            if (!colour) return;\n            let result = colour;\n            if (colour.indexOf(\"rgb\")!==-1) {\n                let [r,g,b] = colour.substring(colour.indexOf('(') + 1, colour.lastIndexOf(')')).split(\",\").map(Number);\n                result = \"#\" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n            }\n            return result.substr(0,7);\n        },\n\n\n        /* convert hex to rgba notation */\n        hexToRgb: function(hex, alpha) {\n            if (typeof alpha === 'undefined') alpha = 1;\n            if (alpha>1) alpha /= 100;\n            if (alpha<0) alpha = 0;\n            let [r,g,b] = hex.replace(/^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i, (m, r, g, b) => '#' + r + r + g + g + b + b)\n                .substring(1).match(/.{2}/g)\n                .map(x => parseInt(x, 16));\n            return 'rgba(' + [r,g,b,alpha].join(\",\") + ')';\n        },\n\n\n        /* get alpha from colour string */\n        getAlpha: function(colour) {\n            if (colour.indexOf('rgba') === 0) {\n                let [r,g,b,a] = colour.substring(colour.indexOf('(') + 1, colour.lastIndexOf(')')).split(\",\").map(Number);\n                return a;\n            }\n            return 1;\n        },\n\n\n        /* get a light or dark contrast colour given a rgb(a) value */\n        getContrast: function(R, G, B, A) {\n          if (!A) A = 1;\n          const brightness = R * 0.299 + G * 0.587 + B * 0.114 + (1 - A) * 255;\n          return brightness > 186 ? \"#000000\" : \"#FFFFFF\";\n        },\n\n\n        /* helper function - replace using arrays of strings */\n        replaceAll: function( str, findArray, replaceArray ) {\n          let i, regex = [], map = {}; \n          for( i=0; i<findArray.length; i++ ){ \n            regex.push( findArray[i].replace(/([-[\\]{}()*+?.\\\\^$|#,])/g,'\\\\$1') );\n            map[findArray[i]] = replaceArray[i]; \n          }\n          regex = regex.join('|');\n          str = str.replace( new RegExp( regex, 'g' ), function(matched){\n            return map[matched];\n          });\n          return str;\n        },\n\n\n        /* used to generate a unique identifier for this instance of the picker */\n        getRandomString: function(len) {\n            len = len || 8;\n            var $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz';\n            var maxPos = $chars.length;\n            var pwd = '';\n            for (let i = 0; i < len; i++) {\n                pwd += $chars.charAt(Math.floor(Math.random() * maxPos));\n            }\n            return pwd;\n        },\n\n\n        /* create the input control that will display and store the colour value */\n        createClickableControl: function () {\n            var that = this;\n            if (this.element.nodeName === 'INPUT' && (this.element.type === 'text' || this.element.type === 'color')) {\n                this.previewElement = this.element;\n                this.previewElement.type = 'text';\n            } else {\n                this.previewElement = document.createElement(\"input\");\n                this.previewElement.type = 'text';\n                this.$element.empty().append(this.previewElement);\n            }\n            this.previewElement.classList.add(\"cpicker-preview-element\");   \n            this.updatePreview(this.settings.value);\n            this.previewElement.onclick = function (e) {\n                that.toggleColourPicker();\n            }\n        },\n\n\n        /* hide or show the colour picker control surface, creating it if required */\n        toggleColourPicker: function(hide) {\n            [...document.querySelectorAll(`.cpicker-container:not(#${this.id})`)].forEach(div => {div.setAttribute('hidden',true) });\n            if (!this.controlSurface) this.createControlSurface();\n            if (!this.controlSurface.hasAttribute('hidden') || hide) {\n                this.controlSurface.setAttribute('hidden',true);\n            } else {\n                this.controlSurface.removeAttribute('hidden');\n            }\n        },\n\n\n        /* add the css for this script */\n        injectCss: function() {\n            if (!document.querySelector('link[id=\"cpicker\"]')) {\n                const link = document.createElement('link');\n                link.id = 'cpicker';\n                link.href = `data:text/css;base64,${btoa(CSS)}`;\n                link.type = 'text/css';\n                link.rel = 'stylesheet';\n                document.getElementsByTagName('head')[0].appendChild(link);\n            }\n        },\n\n\n\n        /* destroy this instance */\n        destroyColourPicker: function() {\n            var node = document.getElementById(this.id);\n            node.parentNode.removeChild(node);\n            this.inputs = {};\n            this.controlSurface = undefined;\n            this.imagePreview = undefined;\n            this.gradientPreview = undefined;\n        },\n\n\n        /* generate and append the control surface html and cache useful pointers */\n        createControlSurface: function () {\n            const html = document.createRange().createContextualFragment(`\n<div class='cpicker-container' hidden id='${this.id}'>\n    <div class='cpicker-modeswitch cpicker-radio'>\n        <div><input type='radio' name='cpicker-mode' value='solid' id='${this.id}a' checked><label for='${this.id}a'>Solid</label></div>\n        <div><input type='radio' name='cpicker-mode' value='gradient' id='${this.id}b'><label for='${this.id}b'>Gradient</label></div>\n        <div><input type='radio' name='cpicker-mode' value='image' id='${this.id}c'><label for='${this.id}c'>Image</label></div>\n    </div>\n    <div class='cpicker-mode-solid'>\n        <div class='cpicker-flex cpicker-flex-between'>\n            <label>Colour: <input type='color' value='#ffcc33' name='cpicker-single'></label>\n            <label>Opacity: <input type='number' value='100' name='cpicker-single-opacity' min='0' max='100' step='5'></label>\n        </div>\n    </div>\n    <div class='cpicker-mode-gradient'>\n        <div class='cpicker-flex cpicker-checkers'>\n            <input type='color' value='#000000' name='cpicker-from' title='Start colour'>\n            <div class='cpicker-gradient-preview'><span/></div>\n            <input type='color' value='#ffffff' name='cpicker-to' title='End colour'>\n        </div>\n        <div class='cpicker-row cpicker-flex cpicker-flex-between'>\n            <input type='number' value='100' name='cpicker-from-opacity' min='0' max='100' step='5' title='Start opacity'>\n            <input type='number' value='100' name='cpicker-to-opacity' min='0' max='100' step='5' title='End opacity'>\n        </div>\n        <div class='cpicker-row'>\n            <span>Shape:</span>\n            <div class='cpicker-radio'>\n                <div><input type='radio' name='cpicker-shape' value='linear-gradient' id='${this.id}e' checked><label for='${this.id}e'>Straight</label></div>\n                <div><input type='radio' name='cpicker-shape' value='radial-gradient' id='${this.id}d'><label for='${this.id}d'>Round</label></div>\n            </div>\n        </div>\n        <div class='cpicker-row'>\n            <span>Direction:</span>\n            <div class='cpicker-radio'>\n                <div><input type='radio' name='cpicker-direction' value='0' id='${this.id}f'><label for='${this.id}f'>&#8593;</label></div>\n                <div><input type='radio' name='cpicker-direction' value='45' id='${this.id}g'><label for='${this.id}g'>&#8599;</label></div>\n                <div><input type='radio' name='cpicker-direction' value='90' id='${this.id}h' checked><label for='${this.id}h'>&#8594;</label></div>\n                <div><input type='radio' name='cpicker-direction' value='135' id='${this.id}i'><label for='${this.id}i'>&#8600;</label></div>\n                <div><input type='radio' name='cpicker-direction' value='180' id='${this.id}j'><label for='${this.id}j'>&#8595;</label></div>\n                <div><input type='radio' name='cpicker-direction' value='225' id='${this.id}k'><label for='${this.id}k'>&#8601;</label></div>\n                <div><input type='radio' name='cpicker-direction' value='270' id='${this.id}l'><label for='${this.id}l'>&#8592;</label></div>\n                <div><input type='radio' name='cpicker-direction' value='315' id='${this.id}m'><label for='${this.id}m'>&#8598;</label></div>\n                <div><input type='radio' name='cpicker-direction' value='-1' id='${this.id}4'><label for='${this.id}4'>&#8277;</label></div>\n            </div>\n        </div>\n    </div>\n    <div class='cpicker-mode-image'>\n        <div class='cpicker-row'>\n            <img class='cpicker-img-preview'>\n            <input type=\"file\" hidden>\n            <button onclick=\"this.previousElementSibling.click()\">Upload</button>\n        </div>\n        <div class='cpicker-row'>\n            <span>Position:</span>\n            <div class='cpicker-radio'>\n                <div><input type='radio' name='cpicker-position' value='top left' id='${this.id}n'><label for='${this.id}n'>tl</label></div>\n                <div><input type='radio' name='cpicker-position' value='top center' id='${this.id}o'><label for='${this.id}o'>tc</label></div>\n                <div><input type='radio' name='cpicker-position' value='top right' id='${this.id}p'><label for='${this.id}p'>tr</label></div>\n                <div><input type='radio' name='cpicker-position' value='middle left' id='${this.id}q'><label for='${this.id}q'>ml</label></div>\n                <div><input type='radio' name='cpicker-position' value='center' id='${this.id}r' checked><label for='${this.id}r'>c</label></div>\n                <div><input type='radio' name='cpicker-position' value='middle right' id='${this.id}s'><label for='${this.id}s'>mr</label></div>\n                <div><input type='radio' name='cpicker-position' value='bottom left' id='${this.id}t'><label for='${this.id}t'>bl</label></div>\n                <div><input type='radio' name='cpicker-position' value='bottom center' id='${this.id}u'><label for='${this.id}u'>bc</label></div>\n                <div><input type='radio' name='cpicker-position' value='bottom right' id='${this.id}v'><label for='${this.id}v'>br</label></div>\n            </div>\n        </div>\n        <div class='cpicker-row'>\n            <span>Repeat:</span>\n            <div class='cpicker-radio'>\n                <div><input type='radio' name='cpicker-repeat' value='no-repeat' id='${this.id}w'><label for='${this.id}w'>None</label></div>\n                <div><input type='radio' name='cpicker-repeat' value='repeat-x' id='${this.id}x'><label for='${this.id}x'>&#8596;</label></div>\n                <div><input type='radio' name='cpicker-repeat' value='repeat-y' id='${this.id}y'><label for='${this.id}y'>&#8597;</label></div>\n                <div><input type='radio' name='cpicker-repeat' value='repeat' id='${this.id}z' checked><label for='${this.id}z'>All</label></div>\n            </div>\n        </div>\n        <div class='cpicker-row'>\n            <span>Size:</span>\n            <div class='cpicker-radio'>\n                <div><input type='radio' name='cpicker-size' value='auto' id='${this.id}1'><label for='${this.id}1'>1:1</label></div>\n                <div><input type='radio' name='cpicker-size' value='100%' id='${this.id}2'><label for='${this.id}2'>Stretch</label></div>\n                <div><input type='radio' name='cpicker-size' value='cover' id='${this.id}3' checked><label for='${this.id}3'>Cover</label></div>\n            </div>\n        </div>\n    </div>\n    <div class='cpicker-controls cpicker-flex'>\n        <span><a class=\"cpicker-button-cancel\">Cancel</a></span>\n        <span><a class=\"cpicker-button-confirm\">Select</a></span>\n    </div>\n</div>`);\n            document.body.appendChild(html);\n            this.controlSurface = document.getElementById(this.id);\n\n            this.inputs = {};\n            this.inputs.single = this.controlSurface.querySelector(\"input[name='cpicker-single']\");\n            this.inputs.singleo = this.controlSurface.querySelector(\"input[name='cpicker-single-opacity']\");\n            this.inputs.from = this.controlSurface.querySelector(\"input[name='cpicker-from']\");\n            this.inputs.fromo = this.controlSurface.querySelector(\"input[name='cpicker-from-opacity']\");\n            this.inputs.to = this.controlSurface.querySelector(\"input[name='cpicker-to']\");\n            this.inputs.too = this.controlSurface.querySelector(\"input[name='cpicker-to-opacity']\");\n            this.inputs.shapes = this.controlSurface.querySelectorAll(\"input[name='cpicker-shape']\");\n            this.inputs.directions = this.controlSurface.querySelectorAll(\"input[name='cpicker-direction']\");\n            this.inputs.positions = this.controlSurface.querySelectorAll(\"input[name='cpicker-position']\");\n            this.inputs.repeats = this.controlSurface.querySelectorAll(\"input[name='cpicker-repeat']\");\n            this.inputs.sizes = this.controlSurface.querySelectorAll(\"input[name='cpicker-size']\");\n            this.imagePreview = this.controlSurface.querySelector(\".cpicker-img-preview\");\n            this.gradientPreview = this.controlSurface.querySelector(\".cpicker-gradient-preview\");\n\n            this.setPosition();\n            this.displayMode();\n            this.updateFields();\n            this.addListeners();\n\n\n        },\n\n\n        /* position the control surface next to the input field */\n        setPosition: function () {\n            if (!this.controlSurface) return;\n            const ww = document.documentElement.clientWidth,\n                  hh = document.documentElement.clientHeight,\n                  pbox = this.previewElement.getBoundingClientRect();\n            this.controlSurface.style.top = pbox.top + window.scrollY + 'px';\n            this.controlSurface.style.left = pbox.left + window.scrollX + pbox.width + 'px'\n        },\n\n\n        /* figure out the correct display mode based on the input value */\n        updateMode: function(data) {\n            this.currentMode = 'solid';\n            if (data.indexOf('url')!==-1) {\n                this.currentMode = 'image';\n            } else if (data.indexOf('-gradient')!==-1) {\n                this.currentMode = 'gradient';\n            }\n            this.displayMode();\n        },\n\n\n        /* switches modes by hiding or showing dom nodes */\n        displayMode: function() {\n            if (!this.controlSurface) return;\n            this.controlSurface.querySelector(\".cpicker-modeswitch input[type='radio'][value='\"+this.currentMode+\"']\").setAttribute(\"checked\",true);\n            $(\"#\"+this.id+\" [class^='cpicker-mode-']\").hide();\n            $(\"#\"+this.id+\" .cpicker-mode-\"+this.currentMode).show();\n        },\n\n\n        /* update both the input control background image and value */\n        updatePreview: function(data) {\n            this.previewElement.style.background = data;\n            this.previewElement.value = data;\n        },\n\n\n        /* displays the left-to-right gradient between the from and to colour pickers */\n        showGradient: function() {\n            let c = this.calculateColour(90);\n            this.gradientPreview.style.background = c;\n        },\n\n\n        /* populates the fields in this instance with the relevant colour information */\n        updateFields: function() {\n            if (!this.controlSurface) return;\n            let props = this.colourProperties(this.previewElement.value);\n            switch (this.currentMode) {\n                case \"solid\":\n                    this.inputs.single.value = props.solid;\n                    this.inputs.singleo.value = (props.solido * 100);\n                    break;\n                case \"gradient\":\n                console.log(props);\n                    this.inputs.from.value = props.from || props.solid || \"#000000\";\n                    this.inputs.to.value = props.to || props.solid || \"#ffffff\";\n                    this.inputs.fromo.value = (props.fromo * 100);\n                    this.inputs.too.value = (props.too * 100);\n                    this.one(this.inputs.shapes,\"[value='\" + props.shape + \"']\").setAttribute('checked',true);\n                    this.one(this.inputs.directions,\"[value='\" + props.direction + \"']\").setAttribute('checked',true);\n                    this.showGradient();\n                    break;\n                case \"image\":\n                    this.one(this.inputs.sizes,\"[value='\" + props.size + \"']\").setAttribute('checked',true);\n                    this.one(this.inputs.repeats,\"[value='\" + props.repeat + \"']\").setAttribute('checked',true);\n                    this.one(this.inputs.positions,\"[value='\" + props.position + \"']\").setAttribute('checked',true);\n                    this.imagePreview.src = props.url;\n                    break;\n            }\n        },\n\n\n        /* bind events to interface elements */\n        addListeners: function () {\n            const that = this;\n            this.inputs.single.addEventListener('change', function (e) {\n                that.selectColour(e.target.value);\n            });\n\n            this.inputs.from.addEventListener('change', function (e) {\n                that.selectColour(e.target.value);\n            });\n\n            this.inputs.to.addEventListener('change', function (e) {\n                that.selectColour(e.target.value,1);\n            });\n\n            this.controlSurface.addEventListener(\"change\", (e) => {\n                if (e.target && e.target.type && e.target.type === \"file\") {\n                    if (e.target.files[0].type.indexOf(\"image/\")===-1) return;\n                    var reader = new FileReader();\n                    reader.onload = function(obj) {\n                        that.imagePreview.src = obj.target.result;\n                        that.selectColour();\n                    }\n                    reader.readAsDataURL(e.target.files[0]);\n                } else if (e.target && e.target.type) {\n                    this.selectColour();\n                }\n                if (e.target === this.inputs.from || e.target === this.inputs.to || e.target === this.inputs.too || e.target === this.inputs.fromo) {\n                    this.showGradient();\n                }\n            });\n\n            this.controlSurface.addEventListener(\"click\", (e) => {\n                e.stopPropagation();\n                if (e.target.type === 'radio' && e.target.name === 'cpicker-mode') {\n                    this.currentMode = e.target.value;\n                    return this.displayMode();\n                } else if (e.target.classList.contains(\"cpicker-button-cancel\")) {\n                    this.updatePreview(that.settings.value); // initial value\n                    this.toggleColourPicker();\n                } else if (e.target.classList.contains(\"cpicker-button-confirm\")) {\n                    let colour = this.calculateColour();\n                    this.updatePreview(colour);\n                    this.toggleColourPicker();\n                    if (this.settings.callback) this.settings.callback(colour);\n                }\n            });\n        },\n\n\n        /* sets up the existing colour and then calls the preview */\n        selectColour: function() {\n            let colour = this.calculateColour();\n            this.updatePreview(colour);\n        },\n\n\n        /* calculates properties of a colour string */\n        colourProperties(value) {\n\n            let gfrom = '', gto = '', colours;\n            let brackettedValue = value.indexOf(\"(\") !== -1\n                        ?\n                        value.substring(value.indexOf('(') + 1, value.lastIndexOf(')'))\n                        :\n                        null;\n            if (brackettedValue !== null && value.indexOf('base64') === -1) {\n                if (brackettedValue.indexOf(\"(\") === -1) {\n                    colours = brackettedValue.split(\",\").map(Function.prototype.call, String.prototype.trim); // or map(s => { s.trim() })\n                    gfrom = colours[1];\n                    gto = colours[2];\n                } else { // assuming rgb values and not supporting other colour types, and only supporting 2 stops\n                    colours = brackettedValue.match(/rgba?\\([^\\)]*\\)/gi);\n                    gfrom = colours[0];\n                    gto = colours[1];\n                }\n            }\n\n            // normalise values to\n            value = this.replaceAll(value,\n                ['centre', 'to top', 'to right', 'to bottom', 'to left', 'middle center', 'center middle', 'left top', 'left middle', 'left bottom', 'center top', 'center center', 'center bottom', 'right top', 'right middle', 'right bottom'],\n                ['center', '0',      '90',       '180',       '270',     'center',        'center',        'top left', 'middle left', 'bottom left', 'top center', 'center',        'bottom center', 'top right', 'middle right', 'bottom right']\n            );\n            let dir = value.match(/\\(?\\s?(\\d{1,3})deg/);\n            if (dir) dir = Number(dir[1]);\n            if (!dir && value.indexOf('circle')!==-1) {\n                dir = -1;\n            }\n\n            // ugly string finding\n            let pos = value.includes('top left') ? 'top left' : value.includes('middle left') ? 'middle left' : value.includes('bottom left') ? 'bottom left' : value.includes('top center') ? 'top center' : value.includes('center') ? 'center' : value.includes('bottom center') ? 'bottom center' : value.includes('top right') ? 'top right' : value.includes('middle right') ? 'middle right' : value.includes('bottom right') ? 'bottom right' : '';\n \n            let props = {\n                solid:  (value.indexOf(\"#\") === 0 || value.indexOf(\"rgb\") === 0)\n                        ?\n                        this.colourToHex(value) // could still be a gradient\n                        :\n                        '',\n\n                solido: this.getAlpha(value),\n\n                shape: value.indexOf(\"radial-gradient\") === 0\n                        ?\n                        \"radial-gradient\"\n                        :\n                        \"linear-gradient\",\n\n                size:  (value.indexOf('cover') !== -1)\n                        ?\n                        \"cover\"\n                        :\n                        (value.indexOf('100%') !== -1)\n                        ?\n                        \"100%\"\n                        : \n                        'auto',\n\n                repeat: (value.indexOf('repeat-x') !== -1)\n                        ?\n                        \"repeat-x\"\n                        :\n                        (value.indexOf('repeat-y') !== -1)\n                        ?\n                        \"repeat-y\"\n                        :\n                        (value.indexOf('repeat') !== -1)\n                        ?\n                        \"repeat\"\n                        :\n                        'no-repeat',\n\n                url:    value.indexOf('url(') !== -1\n                        ?\n                        brackettedValue\n                        :\n                        'data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=', // http://disq.us/p/d5a8xb\n\n                from:   this.colourToHex(gfrom),\n                fromo:  this.getAlpha(gfrom), \n                to:     this.colourToHex(gto),\n                too:    this.getAlpha(gto), \n                position: pos,\n                direction: dir  \n            }\n            return props;\n\n        },\n\n\n        /* calculates a colour based on the dislpayMode (solid, gradient, image) */\n        calculateColour: function(altDirection) {\n            let colour = this.settings.value,\n                direction = 'center';\n\n            switch (this.currentMode) {\n                case \"solid\":\n                    colour = this.inputs.single.value;\n                    let alpha = (this.inputs.singleo.value / 100);\n                    if (alpha < 1) colour = this.hexToRgb(colour, alpha);\n                    break;\n\n                case \"gradient\":\n                    let shape = this.getChecked(this.inputs.shapes).value,\n                        direction = Number(this.getChecked(this.inputs.directions).value),\n                        cFrom = this.inputs.from.value,\n                        aFrom = (this.inputs.fromo.value / 100),\n                        cTo = this.inputs.to.value,\n                        aTo = (this.inputs.too.value / 100);\n                    if (aFrom < 1) cFrom = this.hexToRgb(cFrom,aFrom);\n                    if (aTo < 1) cTo = this.hexToRgb(cTo,aTo);\n                    if (shape === \"radial-gradient\" && !altDirection) {\n                        switch (direction) {\n                            case -1: direction = \"circle at center\"; break;\n                            case 0: direction = \"circle at top center\"; break;\n                            case 45: direction = \"circle at top right\"; break;\n                            case 90: direction = \"circle at right\"; break;\n                            case 135: direction = \"circle at bottom right\"; break;\n                            case 180: direction = \"circle at bottom\"; break;\n                            case 225: direction = \"circle at bottom left\"; break;\n                            case 270: direction = \"circle at left\"; break;\n                            case 315: direction = \"circle at top left\"; break;\n                        }\n                        colour = \"radial-gradient(\" + [direction,cFrom + \" 1%\", cTo + \" 99%\"].join(\", \") + \")\";\n                    } else {\n                        if (altDirection) direction = altDirection;\n                        colour = \"linear-gradient(\" + [direction+\"deg\",cFrom + \" 1%\", cTo + \" 99%\"].join(\", \") + \")\";\n                    }\n                    break;\n\n                case \"image\":\n                    let repeat = this.getChecked(this.inputs.repeats).value,\n                        position = this.getChecked(this.inputs.positions).value,\n                        size = this.getChecked(this.inputs.sizes).value;\n                    colour = \"url(\" + this.imagePreview.src + \") \" + repeat + \" \" + position + \" / \" + size;\n                    break;\n            }\n            return colour;\n        }\n    }\n    window.CPicker = CPicker;\n})(window, XNQuery)\n"],"sourceRoot":""}